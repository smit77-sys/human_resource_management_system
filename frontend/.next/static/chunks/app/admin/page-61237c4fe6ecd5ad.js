(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9782:function(e,t,a){Promise.resolve().then(a.bind(a,9725))},9725:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),l=a(3608),n=a(2265),r=a(5989);function c(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)([]),[o,i]=(0,n.useState)("employees"),[d,p]=(0,n.useState)(!0);(0,n.useEffect)(()=>{"employees"===o?m():u()},[o]);let m=async()=>{try{let e=await r.tV.getAll();t(e.data.employees),p(!1)}catch(e){console.error("Failed to fetch employees",e),p(!1)}},u=async()=>{try{let e=await r.a8.getAll();c(e.data),p(!1)}catch(e){console.error("Failed to fetch leaves",e),p(!1)}},h=async e=>{try{await r.a8.approve(e),u()}catch(e){console.error("Failed to approve leave",e)}},y=async e=>{try{await r.a8.reject(e,"Rejected by admin"),u()}catch(e){console.error("Failed to reject leave",e)}};return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Admin Dashboard"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>i("employees"),className:"px-4 py-2 rounded ".concat("employees"===o?"btn-primary":"btn-secondary"),children:"Employees"}),(0,s.jsx)("button",{onClick:()=>i("leaves"),className:"px-4 py-2 rounded ".concat("leaves"===o?"btn-primary":"btn-secondary"),children:"Leave Requests"})]}),"employees"===o&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Employees"}),d?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Designation"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Department"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsxs)("td",{className:"px-4 py-2",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.email}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.designation}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.department}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("button",{className:"btn-secondary text-sm",children:"Edit"})})]},e._id))})]})})]}),"leaves"===o&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Leave Requests"}),d?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"border p-4 rounded",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-bold",children:[null===(t=e.employeeId)||void 0===t?void 0:t.firstName," ",null===(a=e.employeeId)||void 0===a?void 0:a.lastName]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.leaveType," - ",e.reason]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(e.startDate).toLocaleDateString()," to"," ",new Date(e.endDate).toLocaleDateString()]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded text-sm ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),"pending"===e.status&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>h(e._id),className:"btn btn-primary",children:"Approve"}),(0,s.jsx)("button",{onClick:()=>y(e._id),className:"btn btn-danger",children:"Reject"})]})]},e._id)})})]})]})})}},3608:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(7437),l=a(2265),n=a(9376),r=a(2097);function c(e){let{children:t}=e,a=(0,n.useRouter)(),{isAuthenticated:c}=(0,r.t)();return((0,l.useEffect)(()=>{c||a.push("/login")},[c,a]),c)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."})}},5989:function(e,t,a){"use strict";a.d(t,{TG:function(){return r},kv:function(){return l},tV:function(){return n},a8:function(){return c},Nb:function(){return o}});let s=a(3464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{var t,a;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject((null===(a=e.response)||void 0===a?void 0:a.data)||e)});let l={signup:e=>s.post("/auth/signup",e),signin:(e,t)=>s.post("/auth/signin",{email:e,password:t}),verifyEmail:e=>s.post("/auth/verify-email",{token:e}),refreshToken:()=>s.post("/auth/refresh")},n={getAll:(e,t)=>s.get("/employees",{params:{page:e,limit:t}}),getById:e=>s.get("/employees/".concat(e)),getMyProfile:()=>s.get("/employees/profile/me"),updateMyProfile:e=>s.put("/employees/profile/me",e),update:(e,t)=>s.put("/employees/".concat(e),t),delete:e=>s.delete("/employees/".concat(e)),search:e=>s.get("/employees/search",{params:{query:e}})},r={checkIn:()=>s.post("/attendance/check-in"),checkOut:()=>s.post("/attendance/check-out"),getMyAttendance:(e,t)=>s.get("/attendance/my-attendance",{params:{startDate:e,endDate:t}}),getEmployeeAttendance:(e,t,a)=>s.get("/attendance/".concat(e),{params:{startDate:t,endDate:a}}),getAll:(e,t)=>s.get("/attendance/all",{params:{startDate:e,endDate:t}}),mark:(e,t)=>s.post("/attendance/".concat(e),t)},c={apply:e=>s.post("/leaves/apply",e),getMyLeaves:()=>s.get("/leaves/my-leaves"),getBalance:()=>s.get("/leaves/balance"),getAll:e=>s.get("/leaves/all",{params:{status:e}}),approve:(e,t)=>s.post("/leaves/".concat(e,"/approve"),{remarks:t}),reject:(e,t)=>s.post("/leaves/".concat(e,"/reject"),{rejectionReason:t})},o={getMyPayroll:()=>s.get("/payroll/my-payroll"),getAll:()=>s.get("/payroll/all"),getEmployee:e=>s.get("/payroll/employee/".concat(e)),create:e=>s.post("/payroll/create",e),update:(e,t)=>s.put("/payroll/".concat(e),t),getAnalytics:()=>s.get("/payroll/analytics")}},2097:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var s=a(9625),l=a(6885);let n=(0,s.Ue)()((0,l.tJ)(e=>({user:null,token:null,isAuthenticated:!1,login:(t,a)=>{e({user:t,token:a,isAuthenticated:!0}),localStorage.setItem("token",a)},logout:()=>{e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token")},setUser:t=>e({user:t})}),{name:"auth-store"}))}},function(e){e.O(0,[299,464,971,117,744],function(){return e(e.s=9782)}),_N_E=e.O()}]);