(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3289:function(e,t,a){Promise.resolve().then(a.bind(a,8482))},8482:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var l=a(7437),s=a(3608),n=a(2265),c=a(5989);function r(){let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{try{let e=await c.tV.getMyProfile();t(e.data)}catch(e){console.error("Failed to fetch profile",e)}finally{s(!1)}})()},[]),a)?(0,l.jsx)("div",{children:"Loading profile..."}):e?(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Profile Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"First Name"}),(0,l.jsx)("p",{className:"text-gray-700",children:e.firstName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Last Name"}),(0,l.jsx)("p",{className:"text-gray-700",children:e.lastName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Email"}),(0,l.jsx)("p",{className:"text-gray-700",children:e.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Designation"}),(0,l.jsx)("p",{className:"text-gray-700",children:e.designation})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Department"}),(0,l.jsx)("p",{className:"text-gray-700",children:e.department})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Salary"}),(0,l.jsxs)("p",{className:"text-gray-700",children:["$",e.salary]})]})]})]}):(0,l.jsx)("div",{children:"Failed to load profile"})}function i(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let e=new Date().toISOString().split("T")[0],a=new Date(Date.now()-2592e6).toISOString().split("T")[0],l=await c.TG.getMyAttendance(a,e);t(l.data)}catch(e){console.error("Failed to fetch attendance",e)}finally{s(!1)}})()},[]);let r=async()=>{try{await c.TG.checkIn(),window.location.reload()}catch(e){console.error("Check-in failed",e)}},i=async()=>{try{await c.TG.checkOut(),window.location.reload()}catch(e){console.error("Check-out failed",e)}};return a?(0,l.jsx)("div",{children:"Loading attendance..."}):(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Attendance"}),(0,l.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,l.jsx)("button",{onClick:r,className:"btn-primary",children:"Check In"}),(0,l.jsx)("button",{onClick:i,className:"btn-primary",children:"Check Out"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Check In"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Check Out"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"px-4 py-2",children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-4 py-2",children:e.checkInTime?new Date(e.checkInTime).toLocaleTimeString():"-"}),(0,l.jsx)("td",{className:"px-4 py-2",children:e.checkOutTime?new Date(e.checkOutTime).toLocaleTimeString():"-"}),(0,l.jsx)("td",{className:"px-4 py-2",children:(0,l.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("present"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})})]},e._id))})]})})]})}function o(){return(0,l.jsx)(s.Z,{children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold",children:"Dashboard"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsx)(r,{}),(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("a",{href:"/attendance",className:"block btn btn-primary text-center",children:"View Attendance"}),(0,l.jsx)("a",{href:"/leave",className:"block btn btn-primary text-center",children:"Apply for Leave"}),(0,l.jsx)("a",{href:"/payroll",className:"block btn btn-primary text-center",children:"View Payroll"})]})]})]}),(0,l.jsx)(i,{})]})})}},3608:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var l=a(7437),s=a(2265),n=a(9376),c=a(2097);function r(e){let{children:t}=e,a=(0,n.useRouter)(),{isAuthenticated:r}=(0,c.t)();return((0,s.useEffect)(()=>{r||a.push("/login")},[r,a]),r)?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."})}},5989:function(e,t,a){"use strict";a.d(t,{TG:function(){return c},kv:function(){return s},tV:function(){return n},a8:function(){return r},Nb:function(){return i}});let l=a(3464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e.data,e=>{var t,a;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject((null===(a=e.response)||void 0===a?void 0:a.data)||e)});let s={signup:e=>l.post("/auth/signup",e),signin:(e,t)=>l.post("/auth/signin",{email:e,password:t}),verifyEmail:e=>l.post("/auth/verify-email",{token:e}),refreshToken:()=>l.post("/auth/refresh")},n={getAll:(e,t)=>l.get("/employees",{params:{page:e,limit:t}}),getById:e=>l.get("/employees/".concat(e)),getMyProfile:()=>l.get("/employees/profile/me"),updateMyProfile:e=>l.put("/employees/profile/me",e),update:(e,t)=>l.put("/employees/".concat(e),t),delete:e=>l.delete("/employees/".concat(e)),search:e=>l.get("/employees/search",{params:{query:e}})},c={checkIn:()=>l.post("/attendance/check-in"),checkOut:()=>l.post("/attendance/check-out"),getMyAttendance:(e,t)=>l.get("/attendance/my-attendance",{params:{startDate:e,endDate:t}}),getEmployeeAttendance:(e,t,a)=>l.get("/attendance/".concat(e),{params:{startDate:t,endDate:a}}),getAll:(e,t)=>l.get("/attendance/all",{params:{startDate:e,endDate:t}}),mark:(e,t)=>l.post("/attendance/".concat(e),t)},r={apply:e=>l.post("/leaves/apply",e),getMyLeaves:()=>l.get("/leaves/my-leaves"),getBalance:()=>l.get("/leaves/balance"),getAll:e=>l.get("/leaves/all",{params:{status:e}}),approve:(e,t)=>l.post("/leaves/".concat(e,"/approve"),{remarks:t}),reject:(e,t)=>l.post("/leaves/".concat(e,"/reject"),{rejectionReason:t})},i={getMyPayroll:()=>l.get("/payroll/my-payroll"),getAll:()=>l.get("/payroll/all"),getEmployee:e=>l.get("/payroll/employee/".concat(e)),create:e=>l.post("/payroll/create",e),update:(e,t)=>l.put("/payroll/".concat(e),t),getAnalytics:()=>l.get("/payroll/analytics")}},2097:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var l=a(9625),s=a(6885);let n=(0,l.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,login:(t,a)=>{e({user:t,token:a,isAuthenticated:!0}),localStorage.setItem("token",a)},logout:()=>{e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token")},setUser:t=>e({user:t})}),{name:"auth-store"}))}},function(e){e.O(0,[299,464,971,117,744],function(){return e(e.s=3289)}),_N_E=e.O()}]);