(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{8161:function(e,a,t){Promise.resolve().then(t.bind(t,5407))},5407:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var s=t(7437),l=t(3608),n=t(2265),r=t(5989);function c(){let[e,a]=(0,n.useState)([]),[t,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(!0),[d,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{u(),m()},[]);let u=async()=>{try{let e=await r.a8.getMyLeaves();a(e.data)}catch(e){console.error("Failed to fetch leaves",e)}},m=async()=>{try{let e=await r.a8.getBalance();c(e.data),o(!1)}catch(e){console.error("Failed to fetch balance",e),o(!1)}},h=async e=>{e.preventDefault();let a=new FormData(e.currentTarget);try{await r.a8.apply({leaveType:a.get("leaveType"),startDate:new Date(a.get("startDate")),endDate:new Date(a.get("endDate")),reason:a.get("reason")}),p(!1),u()}catch(e){console.error("Failed to apply for leave",e)}};return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Leave Management"}),!i&&t&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Paid Leave Used"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:t.paidLeaveUsed}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Remaining: ",t.paidLeaveRemaining]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Sick Leave Used"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:t.sickLeaveUsed}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Remaining: ",t.sickLeaveRemaining]})]})]}),(0,s.jsx)("button",{onClick:()=>p(!d),className:"btn-primary",children:d?"Cancel":"Apply for Leave"}),d&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Apply for Leave"}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Leave Type"}),(0,s.jsxs)("select",{name:"leaveType",className:"form-input","aria-label":"Leave Type",required:!0,children:[(0,s.jsx)("option",{value:"paid",children:"Paid Leave"}),(0,s.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,s.jsx)("option",{value:"unpaid",children:"Unpaid Leave"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Start Date"}),(0,s.jsx)("input",{type:"date",name:"startDate",className:"form-input","aria-label":"Start Date",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"End Date"}),(0,s.jsx)("input",{type:"date",name:"endDate",className:"form-input","aria-label":"End Date",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Reason"}),(0,s.jsx)("textarea",{name:"reason",className:"form-input","aria-label":"Reason for Leave",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"btn-primary",children:"Submit Leave Request"})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Your Leave Requests"}),(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)("div",{className:"border p-4 rounded",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold",children:e.leaveType}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(e.startDate).toLocaleDateString()," -"," ",new Date(e.endDate).toLocaleDateString()]}),(0,s.jsx)("p",{className:"text-sm",children:e.reason})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded text-sm ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})},e._id))})]})]})})}},3608:function(e,a,t){"use strict";t.d(a,{Z:function(){return c}});var s=t(7437),l=t(2265),n=t(9376),r=t(2097);function c(e){let{children:a}=e,t=(0,n.useRouter)(),{isAuthenticated:c}=(0,r.t)();return((0,l.useEffect)(()=>{c||t.push("/login")},[c,t]),c)?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."})}},5989:function(e,a,t){"use strict";t.d(a,{TG:function(){return r},kv:function(){return l},tV:function(){return n},a8:function(){return c},Nb:function(){return i}});let s=t(3464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{var a,t;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject((null===(t=e.response)||void 0===t?void 0:t.data)||e)});let l={signup:e=>s.post("/auth/signup",e),signin:(e,a)=>s.post("/auth/signin",{email:e,password:a}),verifyEmail:e=>s.post("/auth/verify-email",{token:e}),refreshToken:()=>s.post("/auth/refresh")},n={getAll:(e,a)=>s.get("/employees",{params:{page:e,limit:a}}),getById:e=>s.get("/employees/".concat(e)),getMyProfile:()=>s.get("/employees/profile/me"),updateMyProfile:e=>s.put("/employees/profile/me",e),update:(e,a)=>s.put("/employees/".concat(e),a),delete:e=>s.delete("/employees/".concat(e)),search:e=>s.get("/employees/search",{params:{query:e}})},r={checkIn:()=>s.post("/attendance/check-in"),checkOut:()=>s.post("/attendance/check-out"),getMyAttendance:(e,a)=>s.get("/attendance/my-attendance",{params:{startDate:e,endDate:a}}),getEmployeeAttendance:(e,a,t)=>s.get("/attendance/".concat(e),{params:{startDate:a,endDate:t}}),getAll:(e,a)=>s.get("/attendance/all",{params:{startDate:e,endDate:a}}),mark:(e,a)=>s.post("/attendance/".concat(e),a)},c={apply:e=>s.post("/leaves/apply",e),getMyLeaves:()=>s.get("/leaves/my-leaves"),getBalance:()=>s.get("/leaves/balance"),getAll:e=>s.get("/leaves/all",{params:{status:e}}),approve:(e,a)=>s.post("/leaves/".concat(e,"/approve"),{remarks:a}),reject:(e,a)=>s.post("/leaves/".concat(e,"/reject"),{rejectionReason:a})},i={getMyPayroll:()=>s.get("/payroll/my-payroll"),getAll:()=>s.get("/payroll/all"),getEmployee:e=>s.get("/payroll/employee/".concat(e)),create:e=>s.post("/payroll/create",e),update:(e,a)=>s.put("/payroll/".concat(e),a),getAnalytics:()=>s.get("/payroll/analytics")}},2097:function(e,a,t){"use strict";t.d(a,{t:function(){return n}});var s=t(9625),l=t(6885);let n=(0,s.Ue)()((0,l.tJ)(e=>({user:null,token:null,isAuthenticated:!1,login:(a,t)=>{e({user:a,token:t,isAuthenticated:!0}),localStorage.setItem("token",t)},logout:()=>{e({user:null,token:null,isAuthenticated:!1}),localStorage.removeItem("token")},setUser:a=>e({user:a})}),{name:"auth-store"}))}},function(e){e.O(0,[299,464,971,117,744],function(){return e(e.s=8161)}),_N_E=e.O()}]);